\documentclass[./main.tex]{subfiles}

\begin{document}
	\subsection{Contracting}
	\begin{definition}
		The instance $\bm{\calI/S} = (G', \lam', x', y')$ obtained by contracting $S\in \lam$ is called the contracted instance. It is formally defined as:
		\begin{itemize}[-]
			\item $G'$ is obtained by contracting the set $S \in \lam$ to a single vertex $s$, keeping parallel edges but removing self-loops.
			\item For each edge $e' \in E(G')$, $x'(e') = x(e)$ where $e$ is the pre-image of $e'$ in $G$.
			%\item $\lam' = \{(R\setminus S) \cup \{s\} : R\in \lam, S \subseteq R\}
			%\cup
			%\{R: R\in \lam, S \cap R = \emptyset\}$
			%\\i.e. contract all occurrences of set $S$ into a single vertex $s$.
			\item Remove all subsets of $S$ from $\lam$ and, add a singleton set containing $s$.
			\item $y'_{\{s\}} = y_S + \frac{1}{2}\cdot D_{\max}(S)$. For all other sets $R'$, $y'_{R'} = y_R$ where, $R$ is the pre-image of $R'$.
		\end{itemize}
	\end{definition}\vspace{3mm}
	\begin{fact}\label{fact:3:val-c}
		$\val(\calI/S) = \val(\calI) - (\val_\calI(S) - D_{\max}(S)) \leqslant \val(\calI)$.
	\end{fact}
The equality follows from the definition of $\val$ and $\calI\setminus S$, and the inequality follows from \hyperref[lemm:2:D-val]{Lemma \ref{lemm:2:D-val}}.\vspace{2mm}
\\Assume that somehow we find a good tour in $\calI\setminus S$. We would like to use this to make some progress toward a tour in $\calI$. We call this lifting.\vspace{2mm}
	\begin{definition}
		For a tour $T$ in $\calI/S$, we define its \textbf{lift} to be the subtour in $\calI$ formed by replacing every consecutive pair of edges into and out of $s$, say $(u_{in}, s)$ and $(s, v_{out})$, by their pre-images $(u_{in}, v_{in}), (u_{out}, v_{out})$ and the shortest $v_{in} - u_{out}$ path in $S$.
	\end{definition}\vspace{4mm}

	\begin{lemma}\label{lemm:3:lift-c}
		Let $T$ be a tour in $\calI/S$. Then the lift $F$ of $T$ satisfies $w_\calI(F) \leqslant w_{\calI/S}(T).$
	\end{lemma}
	\begin{proof}
	Note that the only edges that differ between $T$ and $F$ are of the following types:
	\begin{itemize}
		\item[Type 1:] Edges of the form $(u_{in},s)$ and $(s,v_{out})$ are in $T$ but not $F$
		\item[Type 2:] The image in $\calI$ of edges of type 1 are in $F$ but not in $T$
		\item[Type 3:] For every pair $(u_{in}, v_{in}),(u_{out},v_{out})$ of type 2, $F$ contains a shortest $v_{in}-u_{out}$ path in $S$.
	\end{itemize}
Pick a pair $(u_{in}, s),(s,v_{out})$ in $T$. By the definition of lifting $T$, we replace these edges by their image in $\calI$, say $(u_{in}, v_{in}),(u_{out},v_{out})$, along with a shortest $v_{in}-u_{out}$ path within $S$. The new edges $(u_{in}, v_{in}),(u_{out},v_{out})$ still pay for everything that the old edges $(u_{in}, s),(s,v_{out})$ used to pay, except for $D_{max}(S)$. The new edges also pay the cost of entering and exiting laminar sets in $S$ using $u_{out}$ and $v_{in}$. The cost payed by the new path is precisely $d_S(u_{out},v_{in})$, so the net loss in weight is $D_{max}(S) - D_{S}(v_{in}, u_{out})\geq 0$.\vspace{2mm}
\\If we the weight only goes down after for every such replacement, then the weight of the lift can only be smaller than the weight of $T$, proving the lemma.
	%	Let $\alpha_R$ be the number of times $T$ crosses the laminar set $R$. Let $(u_{in}^{(1)}, s), (s, v_{out}^{(1)}),\cdots, (u_{in}^{(k)}, s), (s, v_{out}^{(k)})$ be the edges of $T$ going in or out of $s$ in the order used to construct the lift of $T$.
	%	\begin{align*}
	%		w_\calI(F) &= \sum_{\substack{R \in \lam'; R \nsubseteq S}}\alpha_R y_R + \sum_{i = 1}^{\alpha_S}\left(2y_S + D_S\left(v_{in}^{(i)}, u_{out}^{(i)}\right)\right)\\
	%		&\leqslant\sum_{R \in \lam': R \nsubseteq S}\alpha_R y_R + \sum_{i = 1}^{\alpha_S}2\left(y_S + \frac{1}{2}D_{\max}(S)\right) = w_{\calI/S}(T)
%		\end{align*}
	\end{proof}

	\subsection{Inducing}
	\begin{definition}
		The instance $\bm{\calI[S]} = (G', \lam', x', y')$ is called the induced instance by inducing on a tight set $S$. It is formally defined as:
		\begin{itemize}
			\item[-] $G' = G/\bar{S}$ where, $\bar{S} = V\setminus S$. Let $\bar{s}$ be the vertex corresponding to set $\bar{S}$.
			\item[-] For each edge $e' \in E(G')$, $x'(e') = x(e)$ where $e$ is the pre-image of $e'$ in $G$.
			\item[-] $\lam' = \{R \in \lam : R \subsetneq S\} \cup \{\{\bar{s}\}\}$.
			\item[-] $y'_{\bar{s}} = \val(S)/2$ and for every other set $R \in \lam'$ its the same as $y_R$.\\
		\end{itemize}
	\end{definition}\vspace{2mm}

	\begin{fact}
		$\val(\calI[S]) = 2\cdot\val(S)$
	\end{fact}

	The sub-tour obtained by lifting a tour in contracted instance is guaranteed to be a single component but its not guaranteed to cover all vertices, for this we use a tour in the induced graph to patch in the vertices that are not visited.\\

	\subfile{Diagrams/Lift-Induced.tex}
	Let $S_1, \dots, S_l$ be the strongly connected components in $S \in \lam$, indexed in topological order.
	\begin{definition}\label{def:3:indu-lift}
		For a tour $T$ in $\calI[S]$, we define its lift to be the following:\\
		For any strongly connected component $S_i \subseteq S$ we obtain a tour $F_i$ of $S_i$ by taking all the edges in $T$ that are contained within $S_i$ and for every time the $T$ exits $S_i$ from $u_{out}$ and enters the next time to a vertex $v_{in}$, we add the shortest $u_{out} - v_{in}$ path in $S_i$.
		This is illustrated in \hyperref[fig:lift-i]{Figure \ref{fig:lift-i}}.\\
		$F = \cup_{i \in [l]} F_i$ is the lift of $T$.\\
	\end{definition}


	\begin{definition}
		We say that a set $S \in \lam$ is contractible with respect to an Eulerian set of egdes $F \subseteq E$ if the lift of any tour of $\calI/S$ plus the set $F$ is a tour in $\calI$.\\
	\end{definition}
	
	Due to the \hyperref[fig:tightPath]{path-like structure} of tight sets, $F$ the lift of a tour in $\calI[S]$ must visit each stringly connected component in $S$ at least once. Therefore, $F$ makes $S$ contractible.\\
<<<<<<< HEAD

=======
	\subfile{Diagrams/TightPaths.tex}
		
>>>>>>> 4d4d2dc66338eda7c17496f792b0356e140c818e
	\begin{lemma}\label{lemm:3:lift-i}
		Let $T$ be a tour in $\calI[S]$. Then the lift $F$ of $T$ satisfies $w_\calI(F) \leqslant w_{\calI[S]}(T).$
	\end{lemma}
	\begin{proof}
		We showed in \hyperref[lemm:2:SiAgree]{lemma \ref{lemm:2:SiAgree}} that any connected component $S_i$ agrees with the laminar family $\lam'$. We can use this in conjunction with \hyperref[lemm:2:D-val]{lemma \ref{lemm:2:D-val}} to bound the cost of the shortest $u_{out} - v_{in}$ path in $S_i$ by $\val_{\calI[S]}(S_i)$. Also, let $k$ be the number of times $T$ visits $\bar{s}$. Therefore weight of $F$ is
		\begin{align*}
			w_{\calI}(F) &= \sum_{i \in [l]} w_{\calI}(F_i)\\
			&\leqslant \sum_{i \in [l]} \left[k\val(S) + w_{\calI}(T \cap E(S_i))\right]\\
			&\leqslant 2k \frac{\val(S)}{2} + \sum_{i \in [l]}w_{\calI}(T \cap E(S_i)) = w_{\calI[S]}(T).
		\end{align*}
	\end{proof}
\end{document}
